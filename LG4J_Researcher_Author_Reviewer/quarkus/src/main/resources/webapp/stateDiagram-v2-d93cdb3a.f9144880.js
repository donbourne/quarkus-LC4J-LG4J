function e(e,t,s,i){Object.defineProperty(e,t,{get:s,set:i,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire94c2,s=t.register;s("bV97L",function(s,i){e(s.exports,"diagram",()=>j);var r=t("jbp6W"),a=t("4LkSm"),l=t("2YFJl"),o=t("b34XJ"),d=t("15VEc");t("eJNXH"),t("gngdn"),t("2ujND"),t("i8Fxz"),t("hV1gR"),t("c0ySZ");let n="rect",c="rectWithTitle",p="statediagram",g=`${p}-state`,b="transition",u=`${b} note-edge`,h=`${p}-note`,y=`${p}-cluster`,f=`${p}-cluster-alt`,x="parent",m="note",w="----",$=`${w}${m}`,S=`${w}${x}`,T="fill:none",D="fill: #333",v="text",A="normal",k={},B=0;function V(e="",t=0,s="",i=w){let r=null!==s&&s.length>0?`${i}${s}`:"";return`state-${e}${r}-${t}`}let N=(e,t,s,i,a,l)=>{var d;let p=s.id,b=null==(d=i[p])?"":d.classes?d.classes.join(" "):"";if("root"!==p){let t=n;!0===s.start&&(t="start"),!1===s.start&&(t="end"),s.type!==r.D&&(t=s.type),k[p]||(k[p]={id:p,shape:t,description:(0,o.e).sanitizeText(p,(0,o.c)()),classes:`${b} ${g}`});let i=k[p];s.description&&(Array.isArray(i.description)?(i.shape=c,i.description.push(s.description)):i.description.length>0?(i.shape=c,i.description===p?i.description=[s.description]:i.description=[i.description,s.description]):(i.shape=n,i.description=s.description),i.description=(0,o.e).sanitizeTextOrArray(i.description,(0,o.c)())),1===i.description.length&&i.shape===c&&(i.shape=n),!i.type&&s.doc&&((0,o.l).info("Setting cluster for ",p,E(s)),i.type="group",i.dir=E(s),i.shape=s.type===r.a?"divider":"roundedWithTitle",i.classes=i.classes+" "+y+" "+(l?f:""));let a={labelStyle:"",shape:i.shape,labelText:i.description,classes:i.classes,style:"",id:p,dir:i.dir,domId:V(p,B),type:i.type,padding:15};if(a.centerLabel=!0,s.note){let t={labelStyle:"",shape:"note",labelText:s.note.text,classes:h,style:"",id:p+$+"-"+B,domId:V(p,B,m),type:i.type,padding:15},r={labelStyle:"",shape:"noteGroup",labelText:s.note.text,classes:i.classes,style:"",id:p+S,domId:V(p,B,x),type:"group",padding:0};B++;let l=p+S;e.setNode(l,r),e.setNode(t.id,t),e.setNode(p,a),e.setParent(p,l),e.setParent(t.id,l);let o=p,d=t.id;"left of"===s.note.position&&(o=t.id,d=p),e.setEdge(o,d,{arrowhead:"none",arrowType:"",style:T,labelStyle:"",classes:u,arrowheadStyle:D,labelpos:"c",labelType:v,thickness:A})}else e.setNode(p,a)}t&&"root"!==t.id&&((0,o.l).trace("Setting node ",p," to be child of its parent ",t.id),e.setParent(p,t.id)),s.doc&&((0,o.l).trace("Adding nodes children "),R(e,s,s.doc,i,a,!l))},R=(e,t,s,i,a,l)=>{(0,o.l).trace("items",s),s.forEach(s=>{switch(s.stmt){case r.b:case r.D:N(e,t,s,i,a,l);break;case r.S:{N(e,t,s.state1,i,a,l),N(e,t,s.state2,i,a,l);let r={id:"edge"+B,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:T,labelStyle:"",label:(0,o.e).sanitizeText(s.description,(0,o.c)()),arrowheadStyle:D,labelpos:"c",labelType:v,thickness:A,classes:b};e.setEdge(s.state1.id,s.state2.id,r,B),B++}}})},E=(e,t=r.c)=>{let s=t;if(e.doc)for(let t=0;t<e.doc.length;t++){let i=e.doc[t];"dir"===i.stmt&&(s=i.value)}return s},L=async function(e,t,s,i){let r;(0,o.l).info("Drawing state diagram (v2)",t),k={},i.db.getDirection();let{securityLevel:c,state:g}=(0,o.c)(),b=g.nodeSpacing||50,u=g.rankSpacing||50;(0,o.l).info(i.db.getRootDocV2()),i.db.extract(i.db.getRootDocV2()),(0,o.l).info(i.db.getRootDocV2());let h=i.db.getStates(),y=new a.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:E(i.db.getRootDocV2()),nodesep:b,ranksep:u,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});N(y,void 0,i.db.getRootDocV2(),h,i.db,!0),"sandbox"===c&&(r=(0,l.select)("#i"+t));let f="sandbox"===c?(0,l.select)(r.nodes()[0].contentDocument.body):(0,l.select)("body"),x=f.select(`[id="${t}"]`),m=f.select("#"+t+" g");await (0,d.r)(m,y,["barb"],p,t),(0,o.u).insertTitle(x,"statediagramTitleText",g.titleTopMargin,i.db.getDiagramTitle());let w=x.node().getBBox(),$=w.width+16,S=w.height+16;x.attr("class",p);let T=x.node().getBBox();(0,o.i)(x,S,$,g.useMaxWidth);let D=`${T.x-8} ${T.y-8} ${$} ${S}`;for(let e of((0,o.l).debug(`viewBox ${D}`),x.attr("viewBox",D),document.querySelectorAll('[id="'+t+'"] .edgeLabel .label'))){let t=e.getBBox(),s=document.createElementNS("http://www.w3.org/2000/svg",n);s.setAttribute("rx",0),s.setAttribute("ry",0),s.setAttribute("width",t.width),s.setAttribute("height",t.height),e.insertBefore(s,e.firstChild)}},j={parser:r.p,db:r.d,renderer:{setConf:function(e){for(let t of Object.keys(e))e[t]},getClasses:function(e,t){return t.db.extract(t.db.getRootDocV2()),t.db.getClasses()},draw:L},styles:r.s,init:e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,(0,r.d).clear()}}}),s("hNIl0",function(s,i){e(s.exports,"default",()=>a);var r=t("gbpSA"),a=function(e){return(0,r.default)(e,4)}});
//# sourceMappingURL=stateDiagram-v2-d93cdb3a.f9144880.js.map
